# Pixi configuration for AgentAskit
# REF: ADR-0005 Modern Tooling Strategy
# Manages conda packages and integrates with mise

[project]
name = "agentaskit"
version = "0.1.0"
description = "AgentAskit Production System"
channels = ["conda-forge"]
platforms = ["linux-64", "osx-arm64", "osx-64", "win-64"]

[dependencies]
# Core development tools
python = ">=3.11"
rust = ">=1.70"

# Build acceleration (faster rebuilds)
sccache = "*"

# Protobuf for gRPC (used by core/build.rs)
protobuf = ">=3.0"

# pkg-config for system library detection
pkg-config = "*"

# Data science / AI (for agent workflows)
numpy = ">=1.24"
pandas = ">=2.0"

# Note: cmake removed - this is a pure Rust project
# cmake was only used by external tool examples (pixi/examples)

[tasks]
# Core build tasks
build = "cargo build --release"
build-dev = "cargo build"
test = "cargo test --all"
lint = "cargo clippy --all-targets --all-features -- -D warnings && cargo fmt --check"
fmt = "cargo fmt --all"
check = "cargo check --all"

# Documentation
doc = "cargo doc --no-deps --document-private-items"

# Clean build artifacts
clean = "cargo clean"

# Build with sccache (faster rebuilds)
build-cached = { cmd = "cargo build --release", env = { RUSTC_WRAPPER = "sccache" } }

[feature.dev.dependencies]
# Development-only dependencies
pytest = "*"
black = "*"
ruff = "*"
pre-commit = "*"

[feature.ml.dependencies]
# Machine learning dependencies (optional)
# pytorch = ">=2.0"
# transformers = "*"

[environments]
default = { features = [], solve-group = "default" }
dev = { features = ["dev"], solve-group = "default" }
# ml = { features = ["ml"], solve-group = "ml" }

[activation]
# Environment activation scripts
scripts = [".envrc"]
