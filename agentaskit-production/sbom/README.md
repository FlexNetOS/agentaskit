# Software Bill of Materials (SBOM)

This directory contains CycloneDX Software Bill of Materials (SBOM) files for all components of the AgentAsKit Production system.

## What is an SBOM?

A Software Bill of Materials (SBOM) is a comprehensive inventory of all software components, libraries, and dependencies used in an application. It provides:

- **Transparency**: Complete visibility into the software supply chain
- **Security**: Enables rapid identification of vulnerable dependencies
- **Compliance**: Meets regulatory requirements and security standards
- **Vulnerability Management**: Facilitates tracking and remediation of security issues

## CycloneDX Format

These SBOMs are generated in the [CycloneDX](https://cyclonedx.org/) format, a lightweight SBOM standard designed for use in application security contexts and supply chain component analysis.

**Specification Version**: 1.5

## SBOM Files

This directory contains the following SBOM files:

### Component SBOMs

| File | Component | Description |
|------|-----------|-------------|
| `agentaskit-core.json` | Core | Core orchestration engine, agent management, and workflow execution |
| `agentaskit-shared.json` | Shared | Shared data models, protocols, types, and utilities |
| `flex-core.json` | FlexNet Execution Core | Execution framework core functionality |
| `wasm-host.json` | WASM Host | WebAssembly runtime and hosting infrastructure |

## How to Use

### Viewing SBOM Contents

You can view SBOM contents using standard JSON tools:

```bash
# Pretty print an SBOM
jq . sbom/agentaskit-core.json

# List all components
jq '.components[] | {name: .name, version: .version}' sbom/agentaskit-core.json

# Count dependencies
jq '.components | length' sbom/agentaskit-core.json

# Find a specific dependency
jq '.components[] | select(.name == "tokio")' sbom/agentaskit-core.json
```

### Vulnerability Scanning

Use the SBOMs with vulnerability scanning tools:

#### Using Grype

```bash
# Install Grype
curl -sSfL https://raw.githubusercontent.com/anchore/grype/main/install.sh | sh -s -- -b /usr/local/bin

# Scan an SBOM
grype sbom:./sbom/agentaskit-core.json
```

#### Using Trivy

```bash
# Install Trivy
brew install aquasecurity/trivy/trivy  # macOS
# or
wget -qO - https://aquasecurity.github.io/trivy-repo/deb/public.key | sudo apt-key add -
echo "deb https://aquasecurity.github.io/trivy-repo/deb $(lsb_release -sc) main" | sudo tee -a /etc/apt/sources.list.d/trivy.list
sudo apt-get update
sudo apt-get install trivy  # Debian/Ubuntu

# Scan an SBOM
trivy sbom ./sbom/agentaskit-core.json
```

#### Using OSV-Scanner

```bash
# Install OSV-Scanner
go install github.com/google/osv-scanner/cmd/osv-scanner@latest

# Scan an SBOM
osv-scanner --sbom=sbom/agentaskit-core.json
```

### License Compliance

Extract license information:

```bash
# List all licenses
jq -r '.components[] | select(.licenses) | .licenses[] | .license.id // .license.name' sbom/agentaskit-core.json | sort -u

# Components with specific license
jq '.components[] | select(.licenses[]?.license.id == "MIT")' sbom/agentaskit-core.json
```

### Supply Chain Risk Analysis

Analyze your supply chain:

```bash
# Identify components with external references (like VCS)
jq '.components[] | select(.externalReferences) | {name: .name, refs: .externalReferences}' sbom/agentaskit-core.json

# Find components without package URLs
jq '.components[] | select(.purl == null) | .name' sbom/agentaskit-core.json
```

## Generating SBOMs

SBOMs are automatically generated by the GitHub Actions workflow (`.github/workflows/sbom.yml`) on:
- Push to main branch
- Pull requests
- Manual workflow dispatch

### Manual Generation

To manually generate SBOMs locally:

```bash
# Install cargo-cyclonedx
cargo install cargo-cyclonedx

# Generate for a specific component
cd core
cargo cyclonedx --format json --spec-version 1.5 --all

# Move to sbom directory
mv *.cdx.json ../sbom/agentaskit-core.json
```

Or use the provided script:

```bash
# From repository root
make sbom  # if Makefile target exists
```

## Integration with Source of Truth (SoT)

All SBOM files are referenced in the project's Source of Truth document:
- **Location**: `core/src/orchestration/sot.md`
- **Evidence**: Links to these SBOM files as evidence for supply chain compliance
- **Hashes**: SHA-256 hashes stored in `operational_hash/HASHES.txt`

## Compliance and Standards

These SBOMs support compliance with:

- **NIST SP 800-161**: Supply Chain Risk Management
- **Executive Order 14028**: Improving the Nation's Cybersecurity
- **NTIA Minimum Elements**: All required SBOM data fields included
- **CycloneDX Specification**: Version 1.5 compliance

## Required Fields

Each SBOM includes:

- `bomFormat`: "CycloneDX"
- `specVersion`: "1.5"
- `serialNumber`: Unique URN for the BOM
- `version`: BOM version number
- `metadata`: Information about the BOM and the component it describes
- `components`: Array of all dependencies with:
  - Name
  - Version
  - Package URL (purl)
  - Licenses
  - Hashes
  - External references

## Verification

To verify SBOM integrity:

```bash
# Validate JSON format
jq empty sbom/agentaskit-core.json && echo "✓ Valid JSON"

# Check required fields
jq -e '.bomFormat, .specVersion, .components' sbom/agentaskit-core.json >/dev/null && echo "✓ Required fields present"

# Verify against operational hashes
sha256sum sbom/*.json
# Compare with operational_hash/HASHES.txt
```

## Updating SBOMs

SBOMs should be regenerated when:
- Dependencies are added, removed, or updated
- Component versions change
- Security patches are applied
- New releases are created

The CI/CD pipeline automatically handles SBOM updates on relevant changes.

## Support and Questions

For questions or issues related to SBOMs:
- Open an issue in the repository
- Contact: @platform team
- Refer to: SUPPLY-SBOM task in `.todo`

## References

- [CycloneDX Official Site](https://cyclonedx.org/)
- [CycloneDX Specification](https://cyclonedx.org/specification/overview/)
- [NTIA SBOM Resources](https://www.ntia.gov/sbom)
- [OWASP Dependency-Track](https://dependencytrack.org/)
- [cargo-cyclonedx](https://github.com/CycloneDX/cyclonedx-rust-cargo)

---

**Last Updated**: 2026-01-02
**SBOM Format**: CycloneDX 1.5
**Task Reference**: SUPPLY-SBOM
