# direnv configuration for AgentAskit
# REF: ADR-0005 Modern Tooling Strategy
# Automatically loads environment when entering directory

# Use mise for tool management
if has mise; then
  eval "$(mise activate bash)"
  eval "$(mise hook-env -s bash)"
fi

# Use pixi for conda environment
if has pixi; then
  eval "$(pixi shell-hook)"
fi

# XDG Base Directory compliance
export XDG_CONFIG_HOME="${XDG_CONFIG_HOME:-$HOME/.config}"
export XDG_DATA_HOME="${XDG_DATA_HOME:-$HOME/.local/share}"
export XDG_CACHE_HOME="${XDG_CACHE_HOME:-$HOME/.cache}"
export XDG_STATE_HOME="${XDG_STATE_HOME:-$HOME/.local/state}"

# Rust XDG compliance
export CARGO_HOME="$XDG_DATA_HOME/cargo"
export RUSTUP_HOME="$XDG_DATA_HOME/rustup"

# Project paths
export AGENTASKIT_ROOT="$(pwd)"
export PATH="$AGENTASKIT_ROOT/tools/external/pixi/target/release:$PATH"
export PATH="$AGENTASKIT_ROOT/tools/external/nushell/target/release:$PATH"
export PATH="$AGENTASKIT_ROOT/tools/external/coreutils/target/release:$PATH"

# Load local .env if present (gitignored)
dotenv_if_exists .env.local
